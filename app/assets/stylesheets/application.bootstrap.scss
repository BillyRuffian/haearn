// Haearn - Dark Iron Theme
// Custom Bootstrap variables (must be before import)

// Import industrial fonts
@import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Bebas+Neue&family=JetBrains+Mono:wght@400;600;700&display=swap');

// Color palette - Dark & Moody Iron
$body-bg: #0a0a0a;
$body-color: #c8c8c8;

// Iron and rust colors
$iron-dark: #141414;
$iron-medium: #1e1e1e;
$iron-light: #2a2a2a;
$gunmetal: #5a6269;
$steel: #43464b;
$rust: #a33a0c;
$rust-light: #c94d14;
$rust-dark: #7a2d09;
$forge-orange: #ff6b35;
$bronze: #cd7f32;
$gold: #d4a847;

// Bootstrap color overrides
$primary: $rust;
$secondary: $gunmetal;
$dark: $iron-dark;
$light: #c8c8c8;
$success: #2d7a3e;
$info: #3d7ea6;
$warning: #b8860b;
$danger: #a33232;

// Typography - Industrial
$font-family-sans-serif: 'Rajdhani', 'Segoe UI', system-ui, sans-serif;
$headings-font-family: 'Bebas Neue', 'Rajdhani', sans-serif;
$font-weight-normal: 500;
$headings-font-weight: 400;
$headings-letter-spacing: 0.05em;

// Card and component backgrounds
$card-bg: $iron-dark;
$card-border-color: $iron-light;

// Input styling
$input-bg: $iron-medium;
$input-border-color: $iron-light;
$input-color: #c8c8c8;
$input-placeholder-color: #555;
$input-focus-border-color: $rust;
$input-focus-box-shadow: 0 0 0 0.2rem rgba($rust, 0.25);

// Button styling - sharper, more industrial
$btn-border-radius: 0.15rem;

// Navbar
$navbar-dark-color: rgba(200, 200, 200, 0.85);
$navbar-dark-hover-color: rgba(255, 255, 255, 1);
$navbar-dark-active-color: $rust-light;

// Links
$link-color: $rust-light;
$link-hover-color: $forge-orange;

// Border radius - sharp industrial edges
$border-radius: 0.15rem;
$border-radius-sm: 0.1rem;
$border-radius-lg: 0.2rem;

// Shadows for depth
$box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.4);
$box-shadow-sm: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.3);
$box-shadow-lg: 0 0.5rem 1rem rgba(0, 0, 0, 0.5);

// Import Bootstrap with our overrides
@import 'bootstrap/scss/bootstrap';
@import 'bootstrap-icons/font/bootstrap-icons';

// Additional custom styles

// Headings with industrial letter spacing
h1,
h2,
h3,
h4,
h5,
h6,
.h1,
.h2,
.h3,
.h4,
.h5,
.h6 {
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

// Body with subtle iron texture gradient
body {
  background:
    radial-gradient(ellipse at 20% 0%, rgba(30, 30, 32, 0.8) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 100%, rgba(25, 22, 20, 0.6) 0%, transparent 50%),
    linear-gradient(180deg,
      #0a0a0a 0%,
      #0d0d0e 10%,
      #101012 25%,
      #0e0e10 50%,
      #0c0c0e 75%,
      #080808 100%);
  background-attachment: fixed;
  min-height: 100vh;
  max-width: 100%;
  overflow-x: clip;

  // Subtle noise texture overlay
  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.03;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    z-index: -1;
  }
}

// Cards with brushed metal feel
.card {
  background:
    linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, transparent 50%),
    linear-gradient(180deg, #161618 0%, #111113 100%);
  border: 1px solid #222224;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.5),
    0 1px 3px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);

  // Subtle top edge highlight like machined metal
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.08) 50%, transparent 100%);
  }
}

.card-header {
  background: linear-gradient(180deg, #1a1a1c 0%, #141416 100%);
  border-bottom: 1px solid #2a2a2c;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.1rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

// Iron-styled buttons - stamped metal look
.btn-primary {
  background: linear-gradient(180deg, $rust-light 0%, $rust 40%, $rust-dark 100%);
  border: 1px solid $rust-dark;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2);
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.05em;

  &:hover {
    background: linear-gradient(180deg, $forge-orange 0%, $rust-light 40%, $rust 100%);
    border-color: $rust;
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.5),
      0 0 20px rgba($rust, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  &:active {
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.3),
      inset 0 2px 4px rgba(0, 0, 0, 0.3);
  }
}

.btn-secondary {
  background: linear-gradient(180deg, #4a4d52 0%, $steel 40%, #33363a 100%);
  border: 1px solid #2a2d30;
  color: #c8c8c8;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.05em;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2);

  &:hover {
    background: linear-gradient(180deg, #555860 0%, #4a4d52 40%, $steel 100%);
    color: #fff;
  }
}

.btn-outline-primary {
  border: 2px solid $rust;
  color: $rust-light;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.05em;

  &:hover {
    background: $rust;
    border-color: $rust;
    color: #fff;
    box-shadow: 0 0 15px rgba($rust, 0.4);
  }
}

// Form controls with machined metal feel
.form-control,
.form-select {
  background: linear-gradient(180deg, #0e0e10 0%, #141416 100%);
  border: 1px solid #2a2a2c;
  color: #c8c8c8;
  font-weight: 500;

  &:focus {
    background: linear-gradient(180deg, #121214 0%, #181a1c 100%);
    border-color: $rust;
    box-shadow:
      0 0 0 2px rgba($rust, 0.2),
      inset 0 1px 3px rgba(0, 0, 0, 0.3);
    color: #e0e0e0;
  }

  &::placeholder {
    color: #4a4a4a;
    font-weight: 400;
  }
}

// Force dark styling on select dropdown options
.form-select {
  &:focus {
    outline: none;
  }

  option {
    background-color: #1e1e1e !important;
    color: #e0e0e0 !important;

    &:hover,
    &:focus,
    &:active,
    &:checked {
      background-color: $rust !important;
      color: #ffffff !important;
    }
  }
}

// Override at html level for native selects
select,
select option {
  background-color: #1e1e1e;
  color: #e0e0e0;
}

select option:hover,
select option:focus,
select option:active,
select option:checked {
  background: linear-gradient(#a33a0c, #a33a0c);
  background-color: #a33a0c !important;
  color: #ffffff !important;
}

// Custom stylable select dropdown (Stimulus controller)
.custom-select-wrapper {
  position: relative;
  width: 100%;
}

.custom-select-button {
  width: 100%;
  text-align: left;
  cursor: pointer;
  display: block;
  padding: 0.5rem 2.25rem 0.5rem 0.75rem;
  background: linear-gradient(180deg, #0e0e10 0%, #141416 100%);
  border: 1px solid #2a2a2c;
  border-radius: 0.375rem;
  color: #c8c8c8;
  font-weight: 500;
  font-size: 1rem;
  line-height: 1.5;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;

  &:hover {
    border-color: #444;
  }

  &:focus {
    background: linear-gradient(180deg, #121214 0%, #181a1c 100%);
    border-color: $rust;
    box-shadow: 0 0 0 2px rgba($rust, 0.2);
    outline: none;
  }

  &.form-select-lg {
    padding: 0.75rem 2.5rem 0.75rem 1rem;
    font-size: 1.125rem;
    border-radius: 0.5rem;
  }

  &.form-select-sm {
    padding: 0.35rem 2rem 0.35rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 0.25rem;
  }

  &::after {
    content: "";
    position: absolute;
    right: 1rem;
    top: 50%;
    border: solid #888;
    border-width: 0 2px 2px 0;
    padding: 3px;
    transform: translateY(-70%) rotate(45deg);
    transition: transform 0.2s;
  }
}

.custom-select-wrapper.open .custom-select-button::after {
  transform: translateY(-30%) rotate(-135deg);
}

.custom-select-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 1050;
  background: #1e1e1e;
  border: 1px solid #333;
  border-top: none;
  border-radius: 0 0 0.15rem 0.15rem;
  max-height: 250px;
  overflow-y: auto;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

.custom-select-option {
  padding: 0.5rem 0.75rem;
  cursor: pointer;
  color: #e0e0e0;
  transition: background-color 0.15s;

  &:hover {
    background-color: #a33a0c;
    color: #ffffff;
  }

  &.selected {
    background-color: #333;
    color: #ffffff;
  }

  &.selected:hover {
    background-color: #a33a0c;
  }
}

.form-label {
  text-transform: uppercase;
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.08em;
  color: #888;
}

// Navbar - recessed industrial channel
.navbar {
  background: #050506 !important;
  border-bottom: 1px solid rgba($rust, 0.3);
  border-top: 1px solid #000;
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.5),
    inset 0 1px 0 rgba(0, 0, 0, 0.3),
    0 4px 20px rgba($rust, 0.15),
    0 1px 0 rgba(255, 255, 255, 0.02);
}

.navbar.sticky-top {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  z-index: 1030;
}

// iOS PWA safe-area handling:
// prevent the navbar (and fixed top notices) from colliding with status indicators.
@media (display-mode: standalone) and (max-width: 991.98px) {
  .navbar {
    padding-top: env(safe-area-inset-top);
  }

  [data-offline-target="indicator"] {
    top: env(safe-area-inset-top) !important;
  }
}

.navbar-brand {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.6rem;
  font-weight: 400;
  letter-spacing: 0.15em;
  text-transform: uppercase;

  // Subtle steel text - not too bright
  background: linear-gradient(180deg, #909090 0%, #686868 50%, #787878 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: none;

  i {
    background: linear-gradient(180deg, $rust-light 0%, $rust-dark 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

.offline-nav-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.12rem 0.35rem;
  border-radius: 999px;
  color: rgba(200, 200, 200, 0.65);
  font-size: 0.65rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  cursor: pointer;
  user-select: none;
  transition: background-color 0.15s ease, color 0.15s ease;

  &:hover {
    background: rgba(255, 255, 255, 0.06);
    color: rgba(230, 230, 230, 0.85);
  }
}

.offline-confidence-dot {
  width: 0.34rem;
  height: 0.34rem;
  border-radius: 999px;
}

.offline-confidence-dot-online {
  background: rgba(45, 122, 62, 0.8);
}

.offline-confidence-dot-syncing {
  background: rgba(61, 126, 166, 0.85);
}

.offline-confidence-dot-offline {
  background: rgba(184, 134, 11, 0.9);
}

.offline-confidence-dot-error {
  background: rgba(163, 50, 50, 0.9);
}

.offline-nav-status {
  opacity: 0.8;
  font-weight: 600;
}

.offline-nav-queue {
  color: rgba(173, 181, 189, 0.85);
  font-variant-numeric: tabular-nums;
}

.quick-log-form {
  .form-control {
    min-height: 2.35rem;
    font-size: 1rem;
  }

  .btn-primary {
    min-height: 2.35rem;
    min-width: 5.5rem;
    font-weight: 700;
  }
}

.notifications-dropdown {
  width: min(28rem, calc(100vw - 1rem));
  min-width: 20rem;
  max-height: min(70vh, 32rem);
  overflow-y: auto;
}

@media (max-width: 575.98px) {
  .notifications-dropdown {
    width: calc(100vw - 0.75rem);
    min-width: 0;
  }
}

.nav-link {
  text-transform: uppercase;
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: #606060 !important;
  transition: color 0.15s ease;

  &:hover {
    color: #a0a0a0 !important;
  }

  &.active {
    color: $rust-light !important;
  }
}

.navbar-toggler {
  border-color: #333 !important;

  &:focus {
    box-shadow: none;
  }
}

// Tables
.table {
  --bs-table-bg: transparent;
  --bs-table-striped-bg: rgba(255, 255, 255, 0.02);
  --bs-table-hover-bg: rgba(183, 65, 14, 0.1);
  --bs-table-border-color: #333;
  color: #e0e0e0;

  // Compact, uppercase table headers used across dashboard/history tables
  thead .table-header-sm {
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: $text-muted;
  }
}

// Badges
.badge {
  font-weight: 600;
  letter-spacing: 0.02em;
}

.badge.bg-warmup {
  background: linear-gradient(180deg, #666 0%, #444 100%);
}

.badge.bg-working {
  background: linear-gradient(180deg, $rust-light 0%, $rust 100%);
}

// Equipment type badges
.equipment-badge-barbell,
.equipment-badge-dumbbell,
.equipment-badge-kettlebell {
  background: linear-gradient(180deg, #5c4d3d 0%, #3d3429 100%);
  color: #c9b896;
}

.equipment-badge-machine,
.equipment-badge-smith_machine {
  background: linear-gradient(180deg, #3d4d5c 0%, #29343d 100%);
  color: #96b8c9;
}

.equipment-badge-cables {
  background: linear-gradient(180deg, $rust 0%, darken($rust, 15%) 100%);
  color: #fff;
}

.equipment-badge-bodyweight {
  background: linear-gradient(180deg, #4d5c3d 0%, #343d29 100%);
  color: #b8c996;
}

.equipment-badge-bands {
  background: linear-gradient(180deg, #5c3d5c 0%, #3d293d 100%);
  color: #c996c9;
}

.equipment-badge-other {
  background: linear-gradient(180deg, #555 0%, #333 100%);
  color: #999;
}

// Source badges
.bg-rust {
  background: linear-gradient(180deg, $rust-light 0%, $rust 100%) !important;
}

// Custom utility classes
.text-iron {
  color: $gunmetal;
}

.text-rust {
  color: $rust-light;
}

.text-forge {
  color: $forge-orange;
}

.bg-iron {
  background-color: $iron-dark;
}

.bg-iron-medium {
  background-color: $iron-medium;
}

.bg-forge {
  background: linear-gradient(180deg, $forge-orange 0%, darken($forge-orange, 10%) 100%) !important;
}

// Small badge text (used for muscle group tags, PR type badges)
.badge-sm {
  font-size: 0.7rem;
}

// Chart annotation text (bar labels, axis labels, legends)
.chart-label {
  font-size: 0.7rem;
  color: $text-muted;
  line-height: 1;
}

.chart-axis-label {
  font-size: 0.65rem;
  color: #6a6a6a;
}

// Display text with heavy industrial feel
.display-1,
.display-2,
.display-3,
.display-4,
.display-5,
.display-6 {
  font-family: 'Bebas Neue', sans-serif;
  letter-spacing: 0.08em;
}

// Consistent page heading style
.display-heading {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 2rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;

  @media (min-width: 768px) {
    font-size: 2.5rem;
  }
}

// Section header within cards/pages (e.g., "Workout Frequency", "PR Timeline")
.section-header {
  text-transform: uppercase;
  color: $text-muted;
  letter-spacing: 0.1em;
  font-size: 0.85rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

// Small stat labels below big numbers (e.g., "Workouts This Week")
.stat-label {
  text-transform: uppercase;
  color: $text-muted;
  letter-spacing: 0.1em;
  font-size: 0.75rem;
  margin-bottom: 0;
}

// Weight display - monospace for alignment
.weight-display {
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
  font-weight: 700;
  letter-spacing: -0.02em;
}

// Rest timer styles
.rest-timer {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 4rem;
  font-weight: 400;
  letter-spacing: 0.05em;
  color: $rust-light;
  text-shadow:
    0 0 30px rgba($rust, 0.5),
    0 2px 4px rgba(0, 0, 0, 0.5);
}

.rest-timer.warning {
  color: $forge-orange;
  animation: pulse 0.8s infinite;
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.6;
  }
}

// PR badge glow - molten metal
.pr-badge {
  background: linear-gradient(180deg, #ffd700 0%, #ff8c00 50%, #cc5500 100%);
  color: #000;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  box-shadow:
    0 0 15px rgba(255, 140, 0, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

// Dropdown menus
.dropdown-menu {
  background: linear-gradient(180deg, #1a1a1c 0%, #121214 100%);
  border: 1px solid #2a2a2c;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
}

.dropdown-item {
  color: #b0b0b0;
  font-weight: 500;

  &:hover {
    background: linear-gradient(90deg, rgba($rust, 0.2) 0%, transparent 100%);
    color: #fff;
  }
}

// Alerts with industrial styling
.alert {
  border-radius: 0.15rem;
  border-left: 3px solid;
  font-weight: 500;
}

// Workout page styles
.workout-block {
  overflow: hidden;

  .card-header {
    background: linear-gradient(135deg, $iron-medium 0%, $iron-dark 100%);
    border-bottom: 1px solid $iron-light;
  }
}

// Drag handle styles for reordering
.drag-handle {
  cursor: grab;
  user-select: none;

  &:active {
    cursor: grabbing;
  }
}

// SortableJS ghost and drag states
.sortable-ghost {
  opacity: 0.4;
  background: rgba($rust, 0.1) !important;
  border: 2px dashed $rust !important;
}

.sortable-chosen {
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
  border-color: $rust !important;
}

.sortable-drag {
  opacity: 1;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
  transform: scale(1.02);
  background: $iron-dark !important;
}

.sortable-dropped {
  animation: drop-landed 0.5s ease-out;
}

@keyframes drop-landed {
  0% {
    box-shadow: 0 0 0 0 rgba($rust, 0.6);
    border-color: $rust;
  }

  40% {
    box-shadow: 0 0 0 8px rgba($rust, 0.2);
    border-color: $rust;
  }

  100% {
    box-shadow: none;
    border-color: transparent;
  }
}

.workout-exercise {
  &:not(:last-child) {
    border-bottom: 1px solid $iron-light;
  }

  // Volume PR highlight for the entire exercise
  &.volume-pr {
    background: linear-gradient(135deg, rgba(#cd7f32, 0.15) 0%, rgba(#ffd700, 0.1) 100%);
    border-left: 3px solid #cd7f32;

    .card-header {
      background: rgba(#cd7f32, 0.1);
    }
  }
}

.set-row {
  border-bottom: 1px solid rgba($iron-light, 0.3);

  &:last-child {
    border-bottom: none;
  }

  &:hover {
    background: rgba($rust, 0.05);
  }

  // Weight PR highlight for individual set
  &.pr-set-row {
    background: linear-gradient(90deg, rgba(#ffd700, 0.15) 0%, rgba(#cd7f32, 0.1) 100%);
    border-left: 3px solid #ffd700;
  }
}

// PR weight text highlighting
.pr-weight {
  color: #ffd700 !important;
  font-weight: bold;
  text-shadow: 0 0 10px rgba(#ffd700, 0.5);
}

.set-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  background: $iron-light;
  border-radius: 50%;
  font-size: 0.75rem;
  font-weight: 600;
}

.add-set-form {
  border-top: 1px solid $iron-light;
  padding-top: 0.75rem;
}

.previous-performance {
  background: rgba($info, 0.1);
  border-radius: 0.25rem;
  padding: 0.25rem 0.5rem;
}

// Workout timer
.workout-timer {
  font-family: 'JetBrains Mono', monospace;
  color: $forge-orange;
}

// Modal styling improvements
.modal-content {
  background: $iron-dark;
  border: 1px solid $iron-light;
}

.modal-header {
  background: linear-gradient(135deg, $iron-medium 0%, $iron-dark 100%);
  border-bottom: 1px solid $iron-light;

  .btn-close {
    filter: invert(0.7);

    &:hover {
      filter: invert(1);
    }
  }
}

// Floating Action Button for Add Exercise
.workout-fab {
  position: fixed;
  bottom: calc(140px + env(safe-area-inset-bottom)); // Above rest timer + bottom nav
  right: 1.25rem;
  z-index: 1039;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  transition: transform 0.15s ease, box-shadow 0.15s ease;

  &:hover,
  &:active {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
  }

  @media (min-width: 992px) {
    bottom: 100px; // No bottom nav on desktop
  }
}

// Hide floating add-exercise button while inline add-set form is open.
// This prevents overlapping actions and accidental taps.
body.add-set-form-open .workout-fab {
  opacity: 0;
  pointer-events: none;
  transform: scale(0.9);
}

// Rest Timer Footer Bar UI
.rest-timer-footer {
  position: fixed;
  bottom: calc(70px + env(safe-area-inset-bottom)); // Position above the bottom nav bar on mobile
  left: 0;
  right: 0;
  z-index: 1040;
  background: linear-gradient(180deg, rgba(20, 20, 22, 0.98) 0%, rgba(10, 10, 12, 0.98) 100%);
  border-top: 1px solid rgba($rust, 0.3);
  backdrop-filter: blur(10px);

  // On large screens, bottom nav is hidden so timer sits at bottom
  @media (min-width: 992px) {
    bottom: 0;
  }
}

.rest-timer-spacer {
  height: 140px; // Match the footer height + bottom nav height on mobile

  @media (min-width: 992px) {
    height: 70px; // Just the timer height on desktop
  }
}

.rest-timer-collapsed {
  padding: 0.75rem 1rem;
  text-align: center;
}

.rest-timer-start-btn {
  background: transparent;
  border: 1px solid $rust;
  color: $rust-light;
  padding: 0.5rem 1.5rem;
  border-radius: 0.25rem;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 0.9rem;
  letter-spacing: 0.1em;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    background: rgba($rust, 0.2);
    color: #fff;
  }
}

.rest-timer-bar {
  padding: 0.5rem 1rem;

  &.timer-active {
    border-top-color: $rust;
    box-shadow: 0 -4px 20px rgba($rust, 0.3);
  }

  &.timer-complete {
    animation: timerPulse 0.3s ease-in-out infinite;
    border-top-color: $forge-orange;
  }
}

.rest-timer-bar-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
  box-sizing: border-box;
}

.rest-timer-center {
  flex: 1;
  max-width: 200px;
  text-align: center;
}

.rest-timer-display {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.75rem;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 0 20px rgba($forge-orange, 0.5);
  line-height: 1;
}

.rest-timer-progress {
  height: 4px;
  background: $iron-light;
  border-radius: 2px;
  overflow: hidden;
  margin-top: 0.25rem;
}

.rest-timer-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, $rust 0%, $forge-orange 100%);
  border-radius: 2px;
  transition: width 1s linear;
}

.rest-timer-adjust-btn {
  background: transparent;
  border: 1px solid $iron-light;
  color: $text-muted;
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    border-color: $rust;
    color: $rust-light;
  }
}

.rest-timer-skip-btn {
  background: transparent;
  border: 1px solid $rust;
  color: $rust-light;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    background: $rust;
    color: #fff;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes timerPulse {

  0%,
  100% {
    border-color: $rust;
    box-shadow: 0 0 20px rgba($rust, 0.3);
  }

  50% {
    border-color: $forge-orange;
    box-shadow: 0 0 40px rgba($forge-orange, 0.6);
  }
}

// Mobile optimizations
@media (max-width: 576px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .btn {
    padding: 0.75rem 1rem;
  }

  .form-control {
    font-size: 16px; // Prevents zoom on iOS
    padding: 0.75rem;
  }

  .navbar-brand {
    font-size: 1.3rem;
  }

  .set-row {
    font-size: 0.9rem;
  }

  .add-set-form {
    .form-label {
      font-size: 0.7rem;
    }
  }

  .rest-timer-display {
    font-size: 1.5rem;
  }

  .rest-timer-bar-content {
    gap: 0.5rem;
  }

  .rest-timer-bar {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  .rest-timer-center {
    min-width: 0;
  }

  .rest-timer-adjust-btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
  }
}

// iPhone landscape support:
// iOS PWA may still rotate to landscape, so force a true full-width layout on short landscape viewports.
@media (orientation: landscape) and (max-height: 500px) {
  .container,
  .container-sm,
  .container-md,
  .container-lg,
  .container-xl,
  .container-xxl {
    max-width: 100%;
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }

  .bottom-nav-container {
    max-width: none;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  .rest-timer-bar-content {
    max-width: 100%;
  }

  .notifications-dropdown {
    width: calc(100vw - 0.75rem);
    min-width: 0;
  }
}

// Workout page can include fixed/animated UI (FAB + timer + swipe actions).
// Clip horizontal paint overflow so it never creates page-level rightward scroll.
.workout-show-page {
  overflow-x: hidden;
}

.workout-show-page main,
.workout-show-page #workout_blocks,
.workout-show-page .workout-block,
.workout-show-page .rest-timer-footer {
  overflow-x: hidden;
}

// =====================================================
// Workout History
// =====================================================

.workout-history-item {
  background: $iron-dark;
  border-color: $iron-light;
  transition: all 0.2s ease;

  &:hover {
    background: $iron-medium;

    .copy-workout-btn {
      opacity: 1;
    }
  }

  a {
    color: inherit;
  }

  h6 {
    color: $body-color;
    font-family: $font-family-sans-serif;
    font-weight: 600;
  }

  .copy-workout-btn {
    opacity: 0.5;
    transition: opacity 0.2s ease;

    @media (max-width: 768px) {
      opacity: 1;
    }
  }
}

// =====================================================
// Exercise History
// =====================================================

.pr-card {
  background: linear-gradient(145deg, $iron-dark 0%, rgba($rust-dark, 0.2) 100%);
  border-color: $rust-dark;

  .card-header {
    background: transparent;
    border-bottom-color: $rust-dark;
    font-family: $headings-font-family;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
}

.pr-stat {
  text-align: center;

  .pr-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: $text-muted;
    margin-bottom: 0.25rem;
  }

  .pr-value {
    font-size: 1.75rem;
    font-weight: 700;
    color: $forge-orange;
    line-height: 1.2;
  }

  .pr-detail {
    font-size: 0.85rem;
    color: $body-color;
  }
}

.history-session {
  background: $iron-dark;
  border-color: $iron-light;

  &.pr-session {
    border-left: 3px solid $forge-orange;
    background: linear-gradient(90deg, rgba($rust-dark, 0.15) 0%, $iron-dark 30%);
  }
}

.sets-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;

  .set-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background: $iron-medium;
    border-radius: 0.25rem;
    font-size: 0.85rem;
    font-family: $font-family-monospace;

    &.pr-set {
      background: rgba($rust, 0.3);
      border: 1px solid $rust;
    }
  }
}

// ===================
// Plate Calculator
// ===================
.plate-calculator {
  padding: 0.75rem;
  background: rgba($iron-light, 0.3);
  border-radius: 0.5rem;
  margin-top: 0.5rem;
}

.plate-visualization {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 0.5rem;
  background: $iron-dark;
  border-radius: 0.25rem;
  overflow-x: auto;
}

.bar-end {
  width: 8px;
  height: 24px;
  background: linear-gradient(90deg, #5a6269, #3d4043);
  border-radius: 2px 0 0 2px;
}

.bar-sleeve {
  width: 30px;
  height: 16px;
  background: linear-gradient(90deg, #3d4043, #4a5055);
  border-radius: 0 4px 4px 0;
}

.plate {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 3px;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.2),
    inset 0 -1px 0 rgba(0, 0, 0, 0.3),
    1px 0 2px rgba(0, 0, 0, 0.5);
  transition: transform 0.1s ease;

  &:hover {
    transform: scale(1.05);
  }

  .plate-label {
    font-size: 0.55rem;
    font-weight: 700;
    color: rgba(0, 0, 0, 0.7);
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2);
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }
}

// Plate colors matching Olympic standards
.plate[data-weight="25"],
.plate[data-weight="2.5"],
.plate[data-weight="5"] {
  .plate-label {
    color: rgba(0, 0, 0, 0.8);
  }
}

.plate[data-weight="20"],
.plate[data-weight="45"] {
  .plate-label {
    color: rgba(255, 255, 255, 0.9);
  }
}

.plate-breakdown {
  font-family: $font-family-monospace;
}

.plate-calc-empty {
  padding: 0.5rem;
  font-style: italic;
}

// =====================================================
// Bottom Navigation Bar (Mobile)
// =====================================================
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: $iron-dark;
  border-top: 1px solid $iron-light;
  z-index: 1030;
  padding-bottom: env(safe-area-inset-bottom);
}

.bottom-nav-container {
  display: flex;
  justify-content: space-around;
  align-items: center;
  max-width: 500px;
  margin: 0 auto;
  padding: 0.5rem 0;
}

.bottom-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-decoration: none;
  color: $gunmetal;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.25rem 0.75rem;
  transition: color 0.15s ease;
  min-width: 60px;

  i {
    font-size: 1.25rem;
    margin-bottom: 0.15rem;
  }

  &:hover,
  &.active {
    color: $rust-light;
  }

  &.active {
    i {
      color: $forge-orange;
    }
  }
}

.bottom-nav-primary {
  color: $gold;
  position: relative;

  i {
    font-size: 1.75rem;
    background: linear-gradient(135deg, $bronze, $gold);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 8px rgba($gold, 0.6)) drop-shadow(0 0 16px rgba($bronze, 0.4));
  }

  span {
    color: $gold;
  }

  // Glow ring behind the icon
  &::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 50%;
    transform: translateX(-50%);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba($gold, 0.25) 0%, transparent 70%);
    z-index: -1;
    animation: pulse-glow 2s ease-in-out infinite;
  }

  &:hover {
    color: $gold;
  }
}

@keyframes pulse-glow {

  0%,
  100% {
    opacity: 0.6;
    transform: translateX(-50%) scale(1);
  }

  50% {
    opacity: 1;
    transform: translateX(-50%) scale(1.1);
  }
}

// Disclosure toggle - hide default marker
.warmup-generator-section,
.card {
  summary {
    list-style: none;

    &::-webkit-details-marker {
      display: none;
    }
  }
}

// Add padding to main content when bottom nav is visible
@media (max-width: 991.98px) {
  main {
    padding-bottom: 80px;
  }
}

// =====================================================
// Swipeable List Items
// =====================================================
.swipeable-container {
  position: relative;
  overflow: hidden;

  // Ensure the container with an open dropdown renders above sibling elements
  &:has(.dropdown-menu.show) {
    z-index: 100;
  }
}

.swipeable-content {
  position: relative;
  background: $iron-dark;
  z-index: 1;
}

.swipe-actions {
  position: absolute;
  top: 0;
  bottom: 0;
  display: flex;
  align-items: stretch;
  z-index: 0;
  overflow: hidden;
  width: 0;

  // button_to generates a <form> wrapper â€” make it fill the panel
  form {
    display: flex;
    flex: 1;
    min-width: 0;
  }

  &.swipe-actions-left {
    left: 0;
    justify-content: flex-start;
  }

  &.swipe-actions-right {
    right: 0;
    justify-content: flex-end;
  }
}

.swipe-action {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-width: 80px;
  color: white;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  border: none;
  cursor: pointer;

  &.swipe-action-delete {
    background: $danger;
  }

  &.swipe-action-duplicate {
    background: $info;
  }

  &.swipe-action-edit {
    background: $info;
  }

  i {
    font-size: 1.25rem;
  }
}

// =====================================================
// Touch-Friendly Improvements
// =====================================================
@media (max-width: 767.98px) {

  // Larger tap targets
  .btn {
    min-height: 44px;
    padding: 0.625rem 1rem;
  }

  .btn-sm {
    min-height: 36px;
    padding: 0.375rem 0.75rem;
  }

  .form-control,
  .form-select {
    min-height: 44px;
    font-size: 16px; // Prevents zoom on iOS
  }

  // Larger list items
  .list-group-item {
    padding: 1rem;
  }

  // Touch feedback
  .touchable {
    -webkit-tap-highlight-color: rgba($rust, 0.2);

    &:active {
      background-color: rgba($rust, 0.1);
    }
  }
}

// =====================================================
// App-Like Transitions & Animations
// =====================================================

// Global transition settings
$transition-fast: 150ms;
$transition-normal: 250ms;
$transition-slow: 350ms;
$ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
$ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
$ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

// Page content fade in on load
.container {
  animation: fadeSlideIn $transition-slow $ease-out-expo;
}

@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Turbo frame transitions
turbo-frame {
  display: block;

  &[busy] {
    opacity: 0.6;
    transition: opacity $transition-fast ease;
  }
}

// Turbo page transitions
html.turbo-loading {
  .container {
    opacity: 0.7;
    transition: opacity $transition-fast ease;
  }
}

// Card transitions - subtle highlight effect
.card {
  transition:
    border-color $transition-normal $ease-out-expo,
    box-shadow $transition-normal $ease-out-expo;

  &:hover {
    border-color: rgba($rust, 0.3);
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.5),
      0 1px 3px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.04),
      0 0 0 1px rgba($rust, 0.1);
  }
}

// Button transitions - press effect
.btn {
  transition:
    transform $transition-fast $ease-out-expo,
    box-shadow $transition-fast $ease-out-expo,
    background $transition-fast ease,
    border-color $transition-fast ease,
    opacity $transition-fast ease;

  &:active {
    transform: scale(0.97);
  }
}

// Form control transitions
.form-control,
.form-select {
  transition:
    border-color $transition-fast ease,
    box-shadow $transition-fast ease,
    background-color $transition-fast ease;
}

// Badge transitions
.badge {
  transition:
    transform $transition-fast $ease-out-back,
    opacity $transition-fast ease;

  &:hover {
    transform: scale(1.05);
  }
}

// List item transitions
.list-group-item {
  transition:
    background-color $transition-fast ease,
    transform $transition-fast $ease-out-expo;

  &:active {
    transform: scale(0.99);
    background-color: rgba($rust, 0.1);
  }
}

// Navbar link transitions
.nav-link,
.navbar-nav .nav-link {
  transition:
    color $transition-fast ease,
    background-color $transition-fast ease,
    transform $transition-fast ease;

  &:active {
    transform: scale(0.95);
  }
}

// Modal transitions - slide up with fade
.modal {
  &.fade .modal-dialog {
    transform: translateY(30px) scale(0.95);
    opacity: 0;
    transition:
      transform $transition-normal $ease-out-expo,
      opacity $transition-normal ease;
  }

  &.show .modal-dialog {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

// Modal backdrop transition
.modal-backdrop {
  transition: opacity $transition-normal ease;

  &.fade {
    opacity: 0;
  }

  &.show {
    opacity: 0.7;
  }
}

// Dropdown transitions
.dropdown-menu {
  transition:
    opacity $transition-fast $ease-out-expo,
    transform $transition-fast $ease-out-expo;
  transform-origin: top center;

  &:not(.show) {
    display: block !important;
    opacity: 0;
    transform: scaleY(0.9) translateY(-8px);
    pointer-events: none;
  }

  &.show {
    opacity: 1;
    transform: scaleY(1) translateY(0);
    pointer-events: auto;
  }
}

// Alert/Flash message transitions
.alert {
  animation: alertSlideIn $transition-normal $ease-out-expo;
}

@keyframes alertSlideIn {
  from {
    opacity: 0;
    transform: translateY(-16px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Collapse transitions (smoother)
.collapse {
  transition: height $transition-normal $ease-in-out;
}

.collapsing {
  transition: height $transition-normal $ease-in-out;
}

// Accordion transitions
.accordion-button {
  transition:
    background-color $transition-fast ease,
    color $transition-fast ease,
    box-shadow $transition-fast ease;

  &::after {
    transition: transform $transition-normal $ease-out-expo;
  }
}

.accordion-collapse {
  transition: height $transition-normal $ease-in-out;
}

// Tab transitions
.nav-tabs .nav-link,
.nav-pills .nav-link {
  transition:
    color $transition-fast ease,
    background-color $transition-fast ease,
    border-color $transition-fast ease;
}

.tab-content>.tab-pane {
  transition: opacity $transition-fast ease;
}

// Tooltip & Popover transitions
.tooltip,
.popover {
  transition:
    opacity $transition-fast ease,
    transform $transition-fast $ease-out-expo;

  &:not(.show) {
    transform: scale(0.95);
  }
}

// Breadcrumb transitions
.breadcrumb-item a {
  transition: color $transition-fast ease;
}

// Table row transitions
.table tbody tr {
  transition: background-color $transition-fast ease;
}

// Icon spin on interaction (for loading states)
.icon-spin {
  animation: spin 1s linear infinite;
}

// Ripple effect for touch feedback
.ripple {
  position: relative;
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width $transition-slow ease, height $transition-slow ease, opacity $transition-slow ease;
    opacity: 0;
  }

  &:active::after {
    width: 200%;
    height: 200%;
    opacity: 1;
    transition: 0s;
  }
}

// Stagger animation for lists
.stagger-in>* {
  animation: fadeSlideIn $transition-normal $ease-out-expo both;

  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: #{$i * 50}ms;
    }
  }
}

// Bottom nav active state animation
.bottom-nav .nav-link {
  transition:
    color $transition-fast ease,
    transform $transition-fast $ease-out-expo;

  &:active {
    transform: scale(0.9);
  }

  &.active {
    animation: navPop $transition-normal $ease-out-back;
  }
}

@keyframes navPop {
  0% {
    transform: scale(0.8);
  }

  50% {
    transform: scale(1.1);
  }

  100% {
    transform: scale(1);
  }
}

// Workout set completion animation
.set-complete {
  animation: setComplete $transition-normal $ease-out-expo;
}

@keyframes setComplete {
  0% {
    background-color: rgba($success, 0.3);
    transform: scale(1.02);
  }

  100% {
    background-color: transparent;
    transform: scale(1);
  }
}

// Success checkmark animation
.success-check {
  animation: checkPop $transition-slow $ease-out-back;
}

@keyframes checkPop {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  50% {
    transform: scale(1.2);
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

// Shake animation for errors
.shake {
  animation: shake 0.5s ease;
}

@keyframes shake {

  0%,
  100% {
    transform: translateX(0);
  }

  20% {
    transform: translateX(-8px);
  }

  40% {
    transform: translateX(8px);
  }

  60% {
    transform: translateX(-4px);
  }

  80% {
    transform: translateX(4px);
  }
}

// Pulse animation for notifications
.pulse {
  animation: pulse 2s ease infinite;
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }

  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

// Smooth scrolling
html {
  scroll-behavior: smooth;
  max-width: 100%;
  overflow-x: clip;
}

// Reduce motion for accessibility
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// =====================================================
// Loading States
// =====================================================
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba($iron-dark, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.loading-spinner {
  width: 2rem;
  height: 2rem;
  border: 3px solid $iron-light;
  border-top-color: $rust;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

// Turbo loading indicator
.turbo-progress-bar {
  background: linear-gradient(90deg, $rust, $forge-orange);
  height: 3px;
}

// Skeleton loading
.skeleton {
  background: linear-gradient(90deg,
      $iron-medium 25%,
      $iron-light 50%,
      $iron-medium 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: $border-radius;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;

  &:last-child {
    width: 70%;
  }
}

.skeleton-button {
  height: 44px;
  width: 120px;
}

// =====================================================
// Pull to Refresh (visual indicator only)
// =====================================================
.pull-indicator {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%) translateY(-100%);
  padding: 0.5rem 1rem;
  background: $iron-medium;
  border-radius: 0 0 $border-radius $border-radius;
  color: $gunmetal;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  transition: transform 0.2s ease;
  z-index: 1040;

  &.visible {
    transform: translateX(-50%) translateY(0);
  }

  i {
    margin-right: 0.25rem;
  }
}

// =====================================================
// Settings Page
// =====================================================
.rest-timer-display {
  font-family: 'JetBrains Mono', monospace;
  font-weight: 600;
  letter-spacing: 0.05em;
}

// Custom range slider styling for dark theme
.form-range {
  &::-webkit-slider-runnable-track {
    background: $iron-light;
    border-radius: 0.25rem;
    height: 0.5rem;
  }

  &::-webkit-slider-thumb {
    background: linear-gradient(135deg, $rust-light, $forge-orange);
    border: none;
    width: 1.25rem;
    height: 1.25rem;
    margin-top: -0.375rem;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);

    &:hover {
      background: linear-gradient(135deg, $forge-orange, $rust-light);
    }

    &:active {
      box-shadow: 0 2px 8px rgba($forge-orange, 0.5);
    }
  }

  &::-moz-range-track {
    background: $iron-light;
    border-radius: 0.25rem;
    height: 0.5rem;
  }

  &::-moz-range-thumb {
    background: linear-gradient(135deg, $rust-light, $forge-orange);
    border: none;
    width: 1.25rem;
    height: 1.25rem;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);

    &:hover {
      background: linear-gradient(135deg, $forge-orange, $rust-light);
    }
  }

  &:focus {
    &::-webkit-slider-thumb {
      box-shadow: 0 0 0 0.2rem rgba($rust, 0.25);
    }

    &::-moz-range-thumb {
      box-shadow: 0 0 0 0.2rem rgba($rust, 0.25);
    }
  }
}

// Settings button group styling
.btn-group .btn-outline-primary {
  border-color: $iron-light;
  color: $gunmetal;

  &:hover {
    background: $iron-light;
    color: $body-color;
    border-color: $iron-light;
  }
}

.btn-group .btn-check:checked+.btn-outline-primary {
  background: linear-gradient(135deg, $rust, $rust-light);
  border-color: $rust;
  color: white;

  .text-muted {
    color: rgba(255, 255, 255, 0.7) !important;
  }
}

// Calendar Heatmap - GitHub-style workout consistency graph
.heatmap-card {
  overflow: hidden; // Contain the fade element
}

.heatmap-scroll-fade {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 50px;
  background: linear-gradient(to right, transparent, $iron-dark);
  pointer-events: none;
  z-index: 1;
  transition: opacity 0.2s ease;

  // Hide on larger screens where scroll isn't needed
  @media (min-width: 900px) {
    display: none;
  }
}

.heatmap-container {
  position: relative;
  overflow-x: auto;
  padding: 1rem 0;
  -webkit-overflow-scrolling: touch; // Smooth scrolling on iOS
}

.heatmap-wrapper {
  display: flex;
  gap: 4px;
}

.heatmap-grid-area {
  display: flex;
  flex-direction: column;
}

.heatmap-months {
  position: relative;
  height: 16px;
  margin-bottom: 3px;

  @media (min-width: 576px) {
    height: 18px;
    margin-bottom: 4px;
  }
}

.heatmap-month-label {
  position: absolute;
  font-size: 0.6rem;
  color: $gunmetal;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  white-space: nowrap;

  @media (min-width: 576px) {
    font-size: 0.7rem;
  }
}

.heatmap-days {
  display: flex;
  flex-direction: column;
  gap: 1px;
  padding-top: 19px; // Align with weeks (account for month labels)

  @media (min-width: 576px) {
    gap: 2px;
    padding-top: 22px;
  }

  span {
    font-size: 0.55rem;
    color: $gunmetal;
    height: 9px;
    line-height: 9px;
    width: 22px;
    text-align: right;
    padding-right: 3px;

    @media (min-width: 576px) {
      font-size: 0.65rem;
      height: 12px;
      line-height: 12px;
      width: 28px;
      padding-right: 4px;
    }
  }
}

.heatmap-weeks {
  display: flex;
  gap: 1px;

  @media (min-width: 576px) {
    gap: 2px;
  }
}

.heatmap-week {
  display: flex;
  flex-direction: column;
  gap: 1px;

  @media (min-width: 576px) {
    gap: 2px;
  }
}

.heatmap-cell {
  width: 9px;
  height: 9px;
  border-radius: 2px;
  transition: transform 0.1s ease;

  @media (min-width: 576px) {
    width: 12px;
    height: 12px;
  }

  &:hover {
    transform: scale(1.3);
    cursor: pointer;
  }

  // Disable hover scale on touch devices
  @media (hover: none) {
    &:hover {
      transform: none;
    }
  }

  &.level-0 {
    background: $iron-medium;
  }

  &.level-1 {
    background: rgba($rust-dark, 0.6);
  }

  &.level-2 {
    background: rgba($rust, 0.8);
  }

  &.level-3 {
    background: $rust-light;
  }

  &.level-4 {
    background: $forge-orange;
    box-shadow: 0 0 4px rgba($forge-orange, 0.5);
  }

  &.level-future {
    background: $iron-dark;
    opacity: 0.3;

    &:hover {
      transform: none;
      cursor: default;
    }
  }
}

.heatmap-legend {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 2px;
  margin-top: 0.5rem;

  @media (min-width: 576px) {
    gap: 3px;
    margin-top: 0.75rem;
  }

  .heatmap-cell {
    width: 9px;
    height: 9px;

    @media (min-width: 576px) {
      width: 12px;
      height: 12px;
    }

    &:hover {
      transform: none;
      cursor: default;
    }
  }
}

.heatmap-tooltip {
  position: absolute;
  background: $iron-dark;
  border: 1px solid $iron-light;
  padding: 0.35rem 0.6rem;
  border-radius: 4px;
  font-size: 0.75rem;
  color: $body-color;
  white-space: nowrap;
  transform: translateX(-50%);
  z-index: 10;
  pointer-events: none;

  // Hide tooltip on touch devices (they can't hover)
  @media (hover: none) {
    display: none;
  }

  &::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid $iron-light;
  }
}

// Muscle Recovery Map
.recovery-row {
  font-size: 0.82rem;
  line-height: 1;
}

.recovery-label {
  width: 5.5rem;
  flex-shrink: 0;
  font-weight: 600;
  font-size: 0.78rem;
  color: $body-color;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.recovery-bar-track {
  height: 8px;
  background: $iron-medium;
  border-radius: 4px;
  overflow: hidden;
}

.recovery-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.6s ease;
  min-width: 4px;
}

.recovery-days {
  width: 2.2rem;
  flex-shrink: 0;
  text-align: right;
  font-weight: 700;
  font-size: 0.75rem;
  font-variant-numeric: tabular-nums;
}

.recovery-scale-bar {
  width: 6rem;
  height: 6px;
  border-radius: 3px;
  background: linear-gradient(to right, #a33232, #b8860b, #3d7ea6, #2d7a3e);
}

// =====================================================
// Admin Panel
// =====================================================
.admin-navbar {
  background: linear-gradient(180deg, #1a0808 0%, #0d0505 100%) !important;
  border-bottom: 1px solid rgba(#8b1a1a, 0.4);
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.5),
    0 4px 20px rgba(#8b1a1a, 0.15);

  .navbar-brand {
    background: linear-gradient(180deg, #c94d4d 0%, #8b1a1a 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;

    i {
      background: linear-gradient(180deg, #ff6b6b 0%, #8b1a1a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  }

  .nav-link.active {
    color: #ff6b6b !important;
  }
}

.admin-stat-card {
  .card-body {
    padding: 1rem;
  }

  .display-5 {
    font-size: 2rem;
    margin-top: 0.25rem;
  }
}

.admin-impersonation-banner {
  background: linear-gradient(90deg, #8b1a1a 0%, #a33232 50%, #8b1a1a 100%);
  color: #fff;
  z-index: 1060;
  position: relative;
}

.admin-sidebar {
  position: fixed;
  top: 56px;
  left: 0;
  bottom: 0;
  width: 220px;
  background: #0d0d0f;
  border-right: 1px solid #1a1a1c;
  overflow-y: auto;
  z-index: 1020;

  .nav-link {
    color: #888 !important;
    padding: 0.75rem 1.25rem;
    border-left: 3px solid transparent;
    font-size: 0.85rem;

    &:hover {
      color: #ccc !important;
      background: rgba(#8b1a1a, 0.1);
    }

    &.active {
      color: #ff6b6b !important;
      border-left-color: #8b1a1a;
      background: rgba(#8b1a1a, 0.15);
    }
  }
}

// Photo preview modal
.photo-preview-modal {
  .photo-display {
    transition: opacity 0.2s ease-in-out;
  }

  .modal-header {
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%);
    padding: 1rem 1.5rem;
  }

  .btn-dark {
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;

    &:hover {
      background: rgba(0, 0, 0, 0.9);
      border-color: $rust;
      transform: scale(1.1);
    }

    &:active {
      transform: scale(0.95);
    }
  }
}
