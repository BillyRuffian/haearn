<% content_for(:title) { "Edit Workout | Haearn" } %>

<div class="container py-4">
  <h1 class="display-heading mb-4">
    <i class="bi bi-pencil me-2"></i>Edit Workout
  </h1>

  <div class="card">
    <div class="card-body">
      <%= form_with model: @workout do |form| %>
        <% if @workout.errors.any? %>
          <div class="alert alert-danger mb-4">
            <% @workout.errors.full_messages.each do |message| %>
              <div><%= message %></div>
            <% end %>
          </div>
        <% end %>

        <div class="mb-4">
          <%= form.label :gym_id, "Gym", class: "form-label" %>
          <%= form.select :gym_id, 
              @gyms.map { |g| [g.name, g.id] },
              { prompt: "Choose a gym..." },
              class: "form-select",
              required: true %>
          <div class="form-text">The gym where this workout took place.</div>
        </div>

        <div class="row mb-4">
          <div class="col-md-6">
            <%= form.label :started_at, "Start Time", class: "form-label" %>
            <%= form.datetime_local_field :started_at, 
                class: "form-control",
                required: true %>
            <div class="form-text">When you started this workout.</div>
          </div>

          <% if @workout.finished_at.present? %>
            <div class="col-md-6">
              <%= form.label :finished_at, "End Time", class: "form-label" %>
              <%= form.datetime_local_field :finished_at, 
                  class: "form-control" %>
              <div class="form-text">When you finished this workout.</div>
            </div>
          <% end %>
        </div>

        <div class="mb-4">
          <%= form.label :notes, "Workout Notes", class: "form-label" %>
          <%= form.text_area :notes, 
              class: "form-control",
              rows: 4,
              placeholder: "How did this workout go? Any observations?" %>
          <div class="form-text">Overall notes about this workout session.</div>
        </div>

        <div class="d-flex gap-2 justify-content-end">
          <%= link_to "Cancel", @workout, class: "btn btn-secondary" %>
          <%= form.submit "Save Changes", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
